<Page
    x:Class="GUI.Views.SettingsPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GUI.Views"
    xmlns:vm="using:GUI.ViewModels"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">

   
    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <StackPanel>

            <TextBlock Style="{ThemeResource HeaderTextBlockStyle}"
                       Text="Settings" />

            <TextBlock Margin="5,25,0,5"
                       Style="{ThemeResource TitleTextBlockStyle}"
                       Text="IRP Broker location" />

            <TextBlock Text="Specify here the path to the named pipe of the CFB Broker. Default locations can be local (e.g. pipe:\\.\pipe\cfb) or remote (e.g. \\IP.ADDRESS\pipe\cfb or file://IP.ADDRESS/pipe/cfb)"/>

            <TextBox Margin="0,5,1000,0" 
                     BorderBrush="Green"
                     BorderThickness="5"
                     x:Name="settingIrpBrokerLocationTextBox" 
                     SelectionChanged="settingIrpBrokerLocationTextBox_Changed"
                     Text="{x:Bind localSettings.Values['IrpBrokerLocation'] }"/>

            <TextBlock Margin="5,25,0,5"
                       Style="{ThemeResource TitleTextBlockStyle}"
                       Text="Poll delay to the Broker" />
            
            <TextBlock Text="The delay in seconds (double) for polling the broker for new data when monitoring mode is enabled"/>

            <TextBox Margin="0,5,1000,0" 
                     BorderThickness="5"
                     x:Name="settingBrokerPollDelay" 
                     SelectionChanged="settingBrokerPollDelay_Changed"
                     Text="{x:Bind localSettings.Values['BackgroundTaskPollDelay'].ToString() }"/>


            <TextBlock Margin="5,25,0,5"
                       Style="{ThemeResource TitleTextBlockStyle}"
                       Text="Auto-Fuzz" />

            <TextBlock Text="The auto-fuzz policy automatically run fuzzing instances for each IRP received. Althouth this helps finding bugs automatically, it might make the system unstable."/>

            <ToggleSwitch x:Name="enableAutoFuzzCheckBox" 
                          IsOn="{x:Bind (x:Boolean)localSettings.Values['EnableAutoFuzz']}"
                          Toggled="onEnableAutoFuzzSetting_Click"
                          OffContent="Auto-Fuzz Disabled" OnContent="Auto-Fuzz Enabled" 
                          Header="Use Auto-Fuzz"/>

            <StackPanel x:Name="autoFuzzStrategiesPanel"
                        Visibility="{x:Bind vm:Converters.BooleanToVisibility(enableAutoFuzzCheckBox.IsOn)}">

                <TextBlock Margin="35,5,0,5"
                       Style="{ThemeResource TitleTextBlockStyle}"
                       Text="Auto-Fuzz Strategies" />

            </StackPanel>
            
            <TextBlock Text="TODO" />
  
        </StackPanel>
    </Grid>
</Page>
